import{defineDisplay as e}from"@directus/extensions-sdk";import{unref as n,watch as t,isRef as r,shallowRef as o,ref as u,defineComponent as i,resolveComponent as a,openBlock as l,createElementBlock as s,createBlock as c,withCtx as f,createElementVNode as d}from"vue";function p(e){return"function"==typeof e?e():n(e)}const m="undefined"!=typeof window,y=()=>{};function v(e,n=!1,t="Timeout"){return new Promise(((r,o)=>{n?setTimeout((()=>o(t)),e):setTimeout(r,e)}))}function h(e,n=!1){function o(r,{flush:o="sync",deep:u=!1,timeout:i,throwOnTimeout:a}={}){let l=null;const s=[new Promise((i=>{l=t(e,(e=>{r(e)!==n&&(null==l||l(),i(e))}),{flush:o,deep:u,immediate:!0})}))];return null!=i&&s.push(v(i,a).then((()=>p(e))).finally((()=>null==l?void 0:l()))),Promise.race(s)}function u(u,i){if(!r(u))return o((e=>e===u),i);const{flush:a="sync",deep:l=!1,timeout:s,throwOnTimeout:c}=null!=i?i:{};let f=null;const d=[new Promise((r=>{f=t([e,u],(([e,t])=>{n!==(e===t)&&(null==f||f(),r(e))}),{flush:a,deep:l,immediate:!0})}))];return null!=s&&d.push(v(s,c).then((()=>p(e))).finally((()=>(null==f||f(),p(e))))),Promise.race(d)}function i(e){return a(1,e)}function a(e=1,n){let t=-1;return o((()=>(t+=1,t>=e)),n)}if(Array.isArray(p(e))){return{toMatch:o,toContains:function(e,n){return o((n=>{const t=Array.from(n);return t.includes(e)||t.includes(p(e))}),n)},changed:i,changedTimes:a,get not(){return h(e,!n)}}}return{toMatch:o,toBe:u,toBeTruthy:function(e){return o((e=>Boolean(e)),e)},toBeNull:function(e){return u(null,e)},toBeNaN:function(e){return o(Number.isNaN,e)},toBeUndefined:function(e){return u(void 0,e)},changed:i,changedTimes:a,get not(){return h(e,!n)}}}function w(e){return h(e)}m&&window,m&&window.document,m&&window.navigator,m&&window.location;var g=Object.defineProperty,b=Object.defineProperties,O=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,x=(e,n,t)=>n in e?g(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,B=(e,n)=>{for(var t in n||(n={}))j.call(n,t)&&x(e,t,n[t]);if(P)for(var t of P(n))T.call(n,t)&&x(e,t,n[t]);return e},E=(e,n)=>b(e,O(n));function L(e,n,t){const{immediate:r=!0,delay:i=0,onError:a=y,onSuccess:l=y,resetOnExecute:s=!0,shallow:c=!0,throwError:f}=null!=t?t:{},d=c?o(n):u(n),p=u(!1),m=u(!1),h=o(void 0);async function g(t=0,...r){s&&(d.value=n),h.value=void 0,p.value=!1,m.value=!0,t>0&&await v(t);const o="function"==typeof e?e(...r):e;try{const e=await o;d.value=e,p.value=!0,l(e)}catch(e){if(h.value=e,a(e),f)throw e}finally{m.value=!1}return d.value}r&&g(i);const b={state:d,isReady:p,isLoading:m,error:h,execute:g};return E(B({},b),{then:(e,n)=>new Promise(((e,n)=>{w(m).toBe(!1).then((()=>e(b))).catch(n)})).then(e,n)})}var N=Object.defineProperty,S=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,I=(e,n,t)=>n in e?N(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;function _(e,n={}){const r=L((()=>async function(e){return new Promise(((n,t)=>{const r=new Image,{src:o,srcset:u,sizes:i}=e;r.src=o,u&&(r.srcset=u),i&&(r.sizes=i),r.onload=()=>n(r),r.onerror=t}))}(p(e))),void 0,((e,n)=>{for(var t in n||(n={}))k.call(n,t)&&I(e,t,n[t]);if(S)for(var t of S(n))A.call(n,t)&&I(e,t,n[t]);return e})({resetOnExecute:!0},n));return t((()=>p(e)),(()=>r.execute(n.delay)),{deep:!0}),r}var z=i({setup(e){const{isLoading:n}=_({src:e.value});return{isLoading:n,src:e.value}},props:{value:{type:String,default:null}}});const M={key:0},R=["src"];z.render=function(e,n,t,r,o,u){const i=a("v-avatar");return e.isLoading?(l(),s("span",M,"Loading")):(l(),c(i,{key:1},{default:f((()=>[d("img",{src:e.src},null,8,R)])),_:1}))},z.__file="src/display.vue";var U=e({id:"photo-url",name:"Photo URL",icon:"image",description:"This displays an external photo url",component:z,options:null,types:["string"]});export{U as default};
